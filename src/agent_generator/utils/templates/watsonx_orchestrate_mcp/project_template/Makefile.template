# =================================================================
# Makefile for: {project_name}
# Framework: watsonx_orchestrate_mcp
# Generated by: Agent-Generator
# =================================================================

.DEFAULT_GOAL := help
.PHONY: help install import-all clean
.SILENT:

VENV_DIR ?= .venv
PYTHON := $(VENV_DIR)/bin/python
PIP := $(VENV_DIR)/bin/pip

install: $(VENV_DIR)/touchfile ## ✨ Create venv and install dependencies from requirements.txt

$(VENV_DIR)/touchfile: requirements.txt
	@echo "--> Creating virtual environment..."
	python3 -m venv $(VENV_DIR)
	@echo "--> Installing dependencies..."
	$(PIP) install -r requirements.txt
	@echo "--> Installing MCP tool dependencies..."
	$(PIP) install -r tools/mcp_tools/python_mcp/requirements.txt
	@touch $(VENV_DIR)/touchfile

import-all: install ## 🚀 Import all agents and toolkits into your watsonx instance
	@echo "--> Running import script..."
	@bash scripts/import-all.sh

run-mcp-server: install ## 🛠️ Run the Python MCP tool server locally
	@echo "--> Starting the Python MCP server..."
	$(PYTHON) tools/mcp_tools/python_mcp/src/main.py

clean: ## 🗑️ Remove virtual environment and temporary files
	@echo "--> Cleaning up..."
	rm -rf $(VENV_DIR) results/

help: ## 💬 Show this help message
	@echo "Usage: make [target]"
	@echo ""
	@echo "Targets:"
	@grep -E '^[a-zA-Z_-]+:.*?##' $(MAKEFILE_LIST) | \
		sed -e 's/\(.*\):.*##/\1##/' | \
		sort | \
		awk -F'##' '{{printf "  \033[36m%-20s\033[0m %s\n", $$1, $$2}}'
