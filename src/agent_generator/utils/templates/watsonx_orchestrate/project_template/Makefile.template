# =================================================================
# Makefile for: {project_name}
# Framework: watsonx_orchestrate
# Generated by: Agent-Generator
# =================================================================

.DEFAULT_GOAL := help
.PHONY: help install run evaluate clean
.SILENT:

VENV_DIR ?= .venv
PYTHON := $(VENV_DIR)/bin/python
PIP := $(VENV_DIR)/bin/pip

install: $(VENV_DIR)/touchfile ## âœ¨ Create venv and install dependencies from requirements.txt

$(VENV_DIR)/touchfile: requirements.txt
	@echo "--> Creating virtual environment..."
	python3 -m venv $(VENV_DIR)
	@echo "--> Installing dependencies..."
	$(PIP) install -r requirements.txt
	@touch $(VENV_DIR)/touchfile

run: install ## ðŸš€ Run the main deployment script
	@echo "--> Running deployment script..."
	@bash scripts/deploy.sh

evaluate: install ## ðŸ“Š Run evaluations
	@echo "--> Running evaluations..."
	@bash scripts/evaluate.sh

clean: ## ðŸ—‘ï¸ Remove virtual environment and temporary files
	@echo "--> Cleaning up..."
	rm -rf $(VENV_DIR) results/

help: ## ðŸ’¬ Show this help message
	@echo "Usage: make [target]"
	@echo ""
	@echo "Targets:"
	@grep -E '^[a-zA-Z_-]+:.*?##' $(MAKEFILE_LIST) | \
		sed -e 's/\(.*\):.*##/\1##/' | \
		sort | \
		awk -F'##' '{{printf "  \033[36m%-20s\033[0m %s\n", $$1, $$2}}'
